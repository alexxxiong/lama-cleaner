# UV 包管理规范

## 包管理工具
- **严格使用 uv** 进行 Python 包管理和依赖管理
- 禁止使用 pip、conda 或其他包管理工具
- 所有依赖安装必须通过 uv 完成

## 依赖管理策略
- 使用 `pyproject.toml` 作为主要的依赖配置文件
- `uv.lock` 文件锁定精确版本，确保环境一致性
- 新增依赖时必须更新 `pyproject.toml` 和重新生成 `uv.lock`

## 安装和更新流程
```bash
# 安装项目依赖
uv sync

# 添加新依赖
uv add package-name

# 添加开发依赖
uv add --dev package-name

# 更新依赖
uv lock --upgrade
```

## 源码包优先策略
- **重要**: 如果某个库没有直接的源码包（source distribution）
- 或者依赖的二进制包可能存在兼容性问题
- **必须立即停止操作并等待用户确认**
- 不得擅自使用可能不稳定的预编译包

## 环境管理
- 使用 uv 的虚拟环境管理功能
- 项目根目录的 `.venv` 由 uv 自动管理
- 不要手动创建或修改虚拟环境

## 版本锁定
- 生产环境严格按照 `uv.lock` 安装
- 开发环境可以使用 `uv sync --dev` 包含开发依赖
- 版本冲突时优先解决而不是强制安装

## 注意事项
- 在添加任何新依赖前，检查其源码包可用性
- 遇到编译问题或缺少源码包时，立即暂停并报告
- 保持 `pyproject.toml` 和 `uv.lock` 的同步更新